let startY=0;$(document).ready(()=>{window.addEventListener("resize",G),$(".modal_wrap").css("display","none"),setTimeout(()=>{$(".loading").remove(),$(".modal").toggleClass("hide"),$(".modal_wrap").css("display","")},1e3),[".event_banner",".event_gnb_menu"].forEach(e=>$(e).on("click",()=>{$(".event_banner").toggleClass("-open")})),$(".event_gnb_gamestart").on("click",()=>{window.open("https://galaxy.beanfun.com/webapi/view/login/twp?redirect_url=https://warsofprasia.beanfun.com/Main")}),$(".modal_close").on("click",()=>{$(".plate_modal").toggleClass("-active"),$(".modal.type--youtube").toggleClass("hide"),$(".modal_box_veil").toggleClass("-hide"),$(".modal").css("opacity","0"),$(".youtube--2").remove()}),$(".section_spec .content .sub_content .video .sourcebox .video_button").on("click",()=>{let e=document.querySelector(".section_spec .content .sub_content .video video");e.paused?(e.play(),$(".section_spec .content .sub_content .video").addClass("play")):e.pause()}),$(".section_hero .video_button").on("click",()=>openVideo("AHkz5TEwE-g")),$(".section_hero_sec .video_button").on("click",()=>openVideo("BjdvG4A2shg")),$(".toggle").on("click",e=>{$(e.target).parent().parent().hasClass("open")?$(e.target).parent().parent().removeClass("open"):$(e.target).parent().parent().addClass("open"),$(e.target).parent().parent().siblings().removeClass("open")});let e=$(".section_map .map"),s=$(".section_story .map"),t=$(".section_place .map"),o=$(".section_map .map_plate"),i=$(".section_story .map_plate"),n=$(".section_place .map_plate"),a=!1,l=-270,c=-1,r=-270,d=-1,p=-686,h=-175,m=-686,g=-175,f=($(window).width()-2637)/2,u=($(window).height()-1483)/2,v=($(window).width()-2637)/2,x=($(window).height()-1483)/2,_=e[0].offsetWidth,w=e[0].offsetHeight,y=o[0].offsetWidth,b=o[0].offsetHeight,C=s[0].offsetWidth,T=s[0].offsetHeight,L=i[0].offsetWidth,k=i[0].offsetHeight,I=t[0].offsetWidth,Y=t[0].offsetHeight,H=n[0].offsetWidth,E=n[0].offsetHeight;$(".type--fortress").on("click",()=>{$(".section_story .textbox").addClass("open"),$(".section_story .dimmed_bg").addClass("show"),$(".section_story .infoside").addClass("open"),769>$(window).width()&&($(".section_story .content .dimmed_bg.show").on("click",()=>{$(".section_story .textbox").removeClass("open"),$(".section_story .dimmed_bg").removeClass("show"),$(".section_story .infoside").removeClass("open")}),$(".section_story .infoside_wrap").on("touchmove",e=>{e.stopPropagation()}))}),$(".section_story .close button").on("click",()=>{$(".section_story .textbox").removeClass("open"),$(".section_story .dimmed_bg").removeClass("show"),$(".section_story .infoside").removeClass("open")}),$(".section_place .point").on("click",e=>{!e.currentTarget.classList.contains("not")&&($(".section_place .infoside_wrap").css("display","none"),$(".section_place .point").addClass("dimmed"),$(".section_place .dimmed_bg").addClass("show"),$(".section_place .infoside").addClass("open"),e.currentTarget.classList.remove("dimmed"),e.currentTarget.classList.contains("type_1")?$(".section_place .infoside_wrap.info_type_1").css("display","flex"):e.currentTarget.classList.contains("type_2")?$(".section_place .infoside_wrap.info_type_2").css("display","flex"):e.currentTarget.classList.contains("type_3")&&$(".section_place .infoside_wrap.info_type_3").css("display","flex"),769>$(window).width()&&($(".section_place .content>.dimmed_bg.show").on("click",()=>{$(".section_place .point").removeClass("dimmed"),$(".section_place .dimmed_bg").removeClass("show"),$(".section_place .infoside").removeClass("open"),$(".section_place .infoside_wrap").css("display","none"),t.removeClass("mini")}),$(".section_place .infoside_wrap").on("touchmove",e=>{e.stopPropagation()})))}),$(".section_place .close button").on("click",()=>{n.css("width","2636.8px"),n.css("height","1483.2px"),H=n[0].offsetWidth,E=n[0].offsetHeight,t.removeClass("mini"),$(".section_place .point").removeClass("dimmed"),$(".section_place .dimmed_bg").removeClass("show"),$(".section_place .infoside").removeClass("open"),$(".section_place .infoside_wrap").css("display","none");let e=$(".section_place .map_plate .point:not(.dimmed)");e.hasClass("type_1")?(u=-182,x=-182,e.hasClass("key--1")?(f=-551,v=-551,n.css("transform","translate3d(-551px, -182px, 0)")):(f=-707,v=-707,n.css("transform","translate3d(-707px, -182px, 0)"))):e.hasClass("type_2")?(u=-81,x=-81,e.hasClass("key--3")?(f=-533,v=-533,n.css("transform","translate3d(-533px, -81px, 0)")):(f=-725,v=-725,n.css("transform","translate3d(-725px, -81px, 0)"))):e.hasClass("type_3")&&(u=-66,x=-66,e.hasClass("key--5")?(f=-393,v=-393,n.css("transform","translate3d(-393px, -66px, 0)")):(f=-852,v=-852,n.css("transform","translate3d(-852px, -66px, 0)")))});let X,W,S;function P(e){return s=>handleSmallHeight(e,s)}function N(e){return s=>{911>$(window).height()?handleSmallHeight(e,s):e.allowTouchMove=!0}}let U,A,M;function O(e){startY=e.touches[0].clientY}function V(e){return s=>{s.stopPropagation();let t=e.slides[e.activeIndex],o=t.scrollTop,i=t.scrollHeight,n=t.clientHeight,a=0===o,l=o+n>=i;0===e.realIndex?l&&s.deltaY>0&&e.slideTo(e.realIndex+1):[1,2,3,4,5,6].includes(e.realIndex)?a&&s.deltaY<0?e.slideTo(e.realIndex-1):l&&s.deltaY>0&&e.slideTo(e.realIndex+1):a&&s.deltaY<0&&e.slideTo(e.realIndex-1)}}let B=()=>{X=new Swiper(".section-pages",{direction:"vertical",touchReleaseOnEdges:!0,mousewheel:{releaseOnEdges:!0},loop:!1,freeMode:!1,noSwiping:!0,noSwipingSelector:"button",autoHeight:!0,speed:1e3,slidesPerView:1,spaceBetween:0,allowTouchMove:!1,on:{init(e){U=N(e),A=P(e),M=V(e),$(".UNI-footer").clone().appendTo(".section_soon"),$(".UNI-footer")[1]?.remove(),$(".UNI-footer").css("z-index",100).css("position","absolute").css("width","100%").css("height",80),$(".gotop").on("click",()=>{e.slideTo(0),e.slides.forEach(e=>{e.scrollTop=0})}),$(".UNI-footer").css("display","none"),$(".section_hero .scroll").on("click",()=>{e.slideTo(1)}),$(".section_hero_sec .scroll").on("click",()=>{e.slideTo(5)}),document.querySelectorAll(".swiper-slide-page").forEach(e=>{e.children[0].classList.contains("section_spec")&&1280>=$(window).width()&&e.addEventListener("touchmove",A,{passive:!0}),e.addEventListener("wheel",M,{passive:!0}),e.children[0].classList.contains("section_spec")||e.addEventListener("touchmove",U,{passive:!0}),e.addEventListener("touchstart",O,{passive:!0})})},slideChange(e){t.removeClass("mini"),$(".section_story .textbox").removeClass("open"),$(".section_story .dimmed_bg").removeClass("show"),$(".section_story .infoside").removeClass("open"),$(".section_place .point").removeClass("dimmed"),$(".section_place .dimmed_bg").removeClass("show"),$(".section_place .infoside").removeClass("open"),$(".section_place .infoside_wrap").css("display","none"),["active","point"].forEach(e=>[".depth_1",".depth_2"].forEach(s=>$(s).removeClass(e))),$(".swiper-slide-page").off("scroll"),$(".swiper-slide-page").removeClass("scrollable"),$(".gotop").removeClass("show"),$(".UNI-footer").css("display","none"),$(".swiper-slide-page")[e.realIndex].classList.add("scrollable"),$(".depth_1")[e.realIndex].classList.add("active"),$(".depth_1")[e.realIndex].classList.add("point"),0!==e.realIndex&&$(".gotop").addClass("show"),6===e.realIndex&&(n.css("width","2636.8px"),n.css("height","1483.2px"),H=n[0].offsetWidth,E=n[0].offsetHeight,f=($(window).width()-2637)/2,u=($(window).height()-1483)/2,v=($(window).width()-2637)/2,x=($(window).height()-1483)/2,n.css("transform",`translate3d(${f}px, ${u}px, 0)`)),7===e.realIndex&&$(".UNI-footer").css("display","block")}}}),$(".swiper-slide-page")[0].classList.add("scrollable"),X.slideTo(0),$(".depth_1")[0].classList.add("active"),$(".depth_1")[0].classList.add("point");for(let e=0;e<8;e++)addPageClick(e,X)},R=()=>{S=new Swiper(".section-group-pages",{touchReleaseOnEdges:!0,mousewheel:{releaseOnEdges:!0},loop:!1,slideActiveClass:"animated",noSwiping:!0,noSwipingSelector:"button",autoHeight:!0,speed:1e3,slidesPerView:1,spaceBetween:0,allowTouchMove:!0,on:{slideChange(e){$(window).width()>768?e.realIndex>0&&e.slideTo(0):e.realIndex>1&&e.slideTo(1)}}})},q=()=>{W=new Swiper(".section-pages",{direction:"vertical",slidesPerView:"auto",touchReleaseOnEdges:!0,mousewheel:{releaseOnEdges:!0,enabled:!1},loop:!1,freeMode:{enabled:!0,sticky:!1,momentumBounce:!1},autoHeight:!0,speed:0,passiveListeners:!0,allowTouchMove:!0,on:{init(e){$(".gotop").on("click",()=>{e.slideTo(0)}),$(".section_hero .scroll").on("click",()=>{e.slideTo(1)}),$(".section_hero_sec .scroll").on("click",()=>{e.slideTo(5)}),$(".UNI-footer").css("display","none")},slideChange(e){$(".section_story .textbox").removeClass("open"),$(".section_story .dimmed_bg").removeClass("show"),$(".section_story .infoside").removeClass("open"),$(".gotop").removeClass("show"),$(".UNI-footer").css("display","none"),0!==e.realIndex&&$(".gotop").addClass("show"),7===e.realIndex&&$(".UNI-footer").css("display","block")}}})};function z(){l=r=-824+($(window).width()-820)/2,o.css("transform",`translate3d(${r}px, ${d}px, 0)`),e.on("mousedown touchstart",s=>{a=!0;let t=0;t=void 0!==s.clientX?s.clientX:s.targetTouches[0].clientX;let o=0;o=void 0!==s.clientY?s.clientY:s.targetTouches[0].clientY,l=t-r,c=o-d,e.css("cursor","grabbing")}),e.on("mousemove touchmove",e=>{if(!a)return;let s=0;s=void 0!==e.clientX?e.clientX:e.targetTouches[0].clientX;let t=0;t=void 0!==e.clientY?e.clientY:e.targetTouches[0].clientY;let i=s-l,n=t-c;if(y>_){let p=_-y;i=Math.max(p,Math.min(0,i))}else i=0;if(b>w){let h=w-b;n=Math.max(h,Math.min(0,n))}else n=0;r=i,d=n,o.css("transform",`translate3d(${r}px, ${d}px, 0)`)}),e.on("mouseup touchend",()=>{a=!1,e.css("cursor","grab")}),p=m=-970+($(window).width()-820)/2,h=g=-42+($(window).height()-1180)/2,i.css("transform",`translate3d(${m}px, ${g}px, 0)`),s.on("mousedown touchstart",e=>{a=!0;let t=0;t=void 0!==e.clientX?e.clientX:e.targetTouches[0].clientX;let o=0;o=void 0!==e.clientY?e.clientY:e.targetTouches[0].clientY,p=t-m,h=o-g,s.css("cursor","grabbing")}),s.on("mousemove touchmove",e=>{if(!a)return;let s=0;s=void 0!==e.clientX?e.clientX:e.targetTouches[0].clientX;let t=0;t=void 0!==e.clientY?e.clientY:e.targetTouches[0].clientY;let o=s-p,n=t-h;if(L>C){let l=C-L;o=Math.max(l,Math.min(0,o))}else o=0;if(k>T){let c=T-k;n=Math.max(c,Math.min(0,n))}else n=0;m=o,g=n,i.css("transform",`translate3d(${m}px, ${g}px, 0)`)}),s.on("mouseup touchend",()=>{a=!1,s.css("cursor","grab")}),t.on("mousedown touchstart",e=>{a=!0;let s=0;s=void 0!==e.clientX?e.clientX:e.targetTouches[0].clientX;let o=0;o=void 0!==e.clientY?e.clientY:e.targetTouches[0].clientY,f=s-v,u=o-x,t.css("cursor","grabbing")}),t.on("mousemove touchmove",e=>{if(!a)return;let s=0;s=void 0!==e.clientX?e.clientX:e.targetTouches[0].clientX;let t=0;t=void 0!==e.clientY?e.clientY:e.targetTouches[0].clientY;let o=s-f,i=t-u;if(H>I){let l=I-H;o=Math.max(l,Math.min(0,o))}else o=0;if(E>Y){let c=Y-E;i=Math.max(c,Math.min(0,i))}else i=0;v=o,x=i,n.css("transform",`translate3d(${v}px, ${x}px, 0)`)}),t.on("mouseup touchend",()=>{a=!1,t.css("cursor","grab")}),$(".section_place button:not(.not)").on("click",e=>{let s,o;e.currentTarget.classList.contains("type_1")?(u=-437,x=-437,o=-437,e.currentTarget.classList.contains("key--1")?(f=-1042,v=-1042,s=-1042):(f=-1259,v=-1259,s=-1259)):e.currentTarget.classList.contains("type_2")?(u=-296,x=-296,o=-296,e.currentTarget.classList.contains("key--3")?(f=-1016,v=-1016,s=-1016):(f=-1285,v=-1285,s=-1285)):e.currentTarget.classList.contains("type_3")&&(u=-275,x=-275,o=-275,e.currentTarget.classList.contains("key--5")?(s=-820,f=-820,v=-820):(s=-1462,f=-1462,v=-1462)),e.currentTarget.classList.length>0&&(t.addClass("mini"),n.css("transform",`translate3d(${s}px, ${o}px, 0)`),n.css("width","3692.52px"),n.css("height","2076.48px"),H=n[0].offsetWidth,E=n[0].offsetHeight)})}$(window).width()>768?(z(),$(".event_gnb").addClass("type_clear"),$(".event_gnb").removeClass("type_default"),B()):($(".section_story .map_plate").css("transform",`translate3d(${-1147+($(window).width()-375)/2}px, ${-234+($(window).height()-675)/2}px, 0px)`),$(".section_map .map_plate").css("width","1868.8px").css("height","911.04px"),$(".section_map .map_plate").css("transform",`translate3d(${-470+($(window).width()-375)/2}px, -121px, 0px)`),$(".section_place button:not(.not)").on("click",e=>{e.currentTarget.classList.length>0&&t.addClass("mini")}),$(".event_gnb").addClass("type_default"),$(".event_gnb").removeClass("type_clear"),q()),R();let j=$(window).width(),F=$(window).height();function G(){let a=document.documentElement,l=window.innerHeight+"px";if(a.style.setProperty("--maxvh",l),S?S.update():setTimeout(()=>R()),$(window).width()>768){j<=768&&z(),o.css("width","2603.8px"),o.css("height","1269px"),$(".event_gnb").addClass("type_clear"),$(".event_gnb").removeClass("type_default"),W&&(W.destroy(!0,!0),W=null),X?X.update():setTimeout(()=>B()),_=e[0].offsetWidth,w=e[0].offsetHeight,y=o[0].offsetWidth,b=o[0].offsetHeight,C=s[0].offsetWidth,T=s[0].offsetHeight,L=i[0].offsetWidth,k=i[0].offsetHeight,I=t[0].offsetWidth,Y=t[0].offsetHeight,H=n[0].offsetWidth,E=n[0].offsetHeight,r+=($(window).width()-j)/2,d+=($(window).height()-F)/2,m+=($(window).width()-j)/2,g+=($(window).height()-F)/2,v+=($(window).width()-j)/2,x+=($(window).height()-F)/2;let c=_-y,p=w-b;r=Math.max(c,Math.min(0,r)),d=Math.max(p,Math.min(0,d)),o.css("transform",`translate3d(${r}px, ${d}px, 0)`),c=C-L,p=T-k,m=Math.max(c,Math.min(0,m)),g=Math.max(p,Math.min(0,g)),i.css("transform",`translate3d(${m}px, ${g}px, 0)`),p=Y-E,v=Math.max(c=I-H,Math.min(0,v)),x=Math.max(p,Math.min(0,x)),n.css("transform",`translate3d(${v}px, ${x}px, 0)`),j=$(window).width(),F=$(window).height()}else X&&(X.destroy(!0,!0),X=null,document.querySelectorAll(".swiper-slide-page").forEach(e=>{e.children[0].classList.contains("section_spec")&&1280>=$(window).width()&&e.removeEventListener("touchmove",A,{passive:!0}),e.removeEventListener("wheel",M,{passive:!0}),e.children[0].classList.contains("section_spec")||e.removeEventListener("touchmove",U,{passive:!0}),e.removeEventListener("touchstart",O,{passive:!0})})),$(".section_map .map_plate").css("transform",`translate3d(${-470+($(window).width()-375)/2}px, -121px, 0px)`),$(".section_story .map_plate").css("transform",`translate3d(${-1147+($(window).width()-375)/2}px, ${-234+($(window).height()-675)/2}px, 0px)`),$(".event_gnb").addClass("type_default"),$(".event_gnb").removeClass("type_clear"),W?W.update():setTimeout(()=>q())}});const handleSmallHeight=(e,s)=>{e.allowTouchMove=!0,s.stopPropagation();let t=s.touches[0].clientY,o="";t>startY?o="down":t<startY&&(o="up");let i=e.slides[e.activeIndex],n=i.scrollTop,a=i.scrollHeight,l=i.clientHeight,c=0===n,r=n+l>=a;c?0!==e.realIndex&&"down"===o&&e.slideTo(e.realIndex-1):r&&"up"===o&&e.slideTo(e.realIndex+1)},addPageClick=(e,s)=>{$(`.page_p${e+1}`).on("click",()=>{s.slideTo(e)})},addAnimateClass=e=>{e.forEach(e=>$(e).addClass("animate"))},openVideo=(e,s)=>{$(".plate_modal").toggleClass("-active"),$(".modal").css("opacity","1").css("visibility","inherit"),$(".modal.type--youtube").toggleClass("hide"),$(".modal_box_veil").toggleClass("-hide"),e?$(".modal_source").append(`<iframe width="auto" height="auto" class="modal_youtube youtube--2"
        src="https://www.youtube.com/embed/${e}?si=1_stAmmA1RL7LFrt"
            frameborder="0" 
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            referrerpolicy="strict-origin-when-cross-origin"
            allowfullscreen></iframe>`):s&&$(".modal_source").append(`<video class="modal_youtube youtube--2" loop autoplay playsinline controls controlslist="nodownload" preload="metadata"><source src=${s} type="video/mp4"></video>`)};